<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Patient Details — BrightCare</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/medical_clinic/public/css/appointments.css">
  <!-- NEW: page-specific stylesheet -->
  <link rel="stylesheet" href="/medical_clinic/public/css/patient_details.css">
</head>

<body>
<div class="layout">
  <aside class="sidebar" role="navigation" aria-label="Main">
    <div class="brand"><div class="brand-logo">BC</div><div class="brand-name">BrightCare</div></div>
    <nav class="nav">
      <div class="nav-section">
        <div class="nav-title">Appointments</div>
        <a class="nav-link" href="./appointments_calendar.html">Calendar</a>
        <a class="nav-link" href="/medical_clinic/public/html/appointments.html">View</a>
        <a class="nav-link" href="/medical_clinic/public/html/appointment_new.html">Add</a>
      </div>
      <div class="nav-section">
        <div class="nav-title">Patients</div>
        <a class="nav-link" href="/medical_clinic/public/html/patients.html">View</a>
        <a class="nav-link" href="/medical_clinic/public/html/patient_new.html">Add</a>
      </div>
      <div class="nav-section">
        <div class="nav-title">Doctors</div>
        <a class="nav-link" href="/medical_clinic/public/html/doctors.html">View</a>
        <a class="nav-link" href="/medical_clinic/public/html/doctor_new.html">Add</a>
      </div>
      <div class="nav-section">
        <div class="nav-title">Rooms</div>
        <a class="nav-link" href="/medical_clinic/public/html/rooms.html">View</a>
        <a class="nav-link" href="/medical_clinic/public/html/room_new.html">Add</a>
      </div>
    </nav>
    <div class="sidebar-footer"><button id="logoutBtn" class="logout-btn" type="button">Log out</button></div>
  </aside>

  <main class="container">
    <header class="page-header">
      <h1 id="ptName">Patient</h1>
      <a id="addApptLink" class="link-new" href="./appointment_new.html">+ New Appointment</a>
    </header>

    <!-- Demographics: now with Actions column -->
    <section class="card">
      <h2>Demographics</h2>
      <table class="kv" aria-label="Patient demographics">
        <thead>
          <tr><th>Field</th><th>Value</th><th class="actions-cell">Actions</th></tr>
        </thead>
        <tbody>
          <tr>
            <th>First name</th>
            <td class="value-cell"><span id="val-first_name"></span><span id="msg-first_name" class="muted-small"></span></td>
            <td class="actions-cell"><button class="edit-btn" data-field="first_name">Edit</button></td>
          </tr>
          <tr>
            <th>Last name</th>
            <td class="value-cell"><span id="val-last_name"></span><span id="msg-last_name" class="muted-small"></span></td>
            <td class="actions-cell"><button class="edit-btn" data-field="last_name">Edit</button></td>
          </tr>
          <tr>
            <th>Phone</th>
            <td class="value-cell"><span id="val-phone"></span><span id="msg-phone" class="muted-small"></span></td>
            <td class="actions-cell"><button class="edit-btn" data-field="phone">Edit</button></td>
          </tr>
          <tr>
            <th>Email</th>
            <td class="value-cell"><span id="val-email"></span><span id="msg-email" class="muted-small"></span></td>
            <td class="actions-cell"><button class="edit-btn" data-field="email">Edit</button></td>
          </tr>
          <tr>
            <th>DOB</th>
            <td class="value-cell"><span id="val-dob"></span><span id="msg-dob" class="muted-small"></span></td>
            <td class="actions-cell"><button class="edit-btn" data-field="dob">Edit</button></td>
          </tr>
          <tr>
            <th>Address</th>
            <td class="value-cell"><span id="val-address"></span><span id="msg-address" class="muted-small"></span></td>
            <td class="actions-cell"><button class="edit-btn" data-field="address">Edit</button></td>
          </tr>
          <tr>
            <th>Created at</th>
            <td class="value-cell"><span id="val-created_at"></span></td>
            <td class="actions-cell"></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section class="card">
      <h2>Future Appointments</h2>
      <div class="table-wrap">
        <table class="table" aria-label="Future appointments">
          <thead>
            <tr>
              <th>Date</th><th>Time</th><th>Doctor</th><th>Room</th><th>Type</th><th>Status</th><th>Summary</th><th class="actions">Actions</th>
            </tr>
          </thead>
          <tbody id="futureBody">
            <tr><td colspan="8" class="empty">Loading…</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <h2>Past Appointments</h2>
      <div class="table-wrap">
        <table class="table" aria-label="Past appointments">
          <thead>
            <tr>
              <th>Date</th><th>Time</th><th>Doctor</th><th>Room</th><th>Type</th><th>Status</th><th>Summary</th><th class="actions">Actions</th>
            </tr>
          </thead>
          <tbody id="pastBody">
            <tr><td colspan="8" class="empty">Loading…</td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</div>

<!-- Drawer + backdrop -->
<div id="drawerBackdrop" class="backdrop"></div>
<aside id="apptDrawer" class="drawer" aria-hidden="true" aria-label="Appointment details">
  <div class="drawer-header">
    <div class="drawer-title">Appointment</div>
    <button class="drawer-close" type="button" id="drawerCloseBtn" aria-label="Close">×</button>
  </div>
  <div class="drawer-body">
    <div class="field-row"><div class="label">Date</div><div class="value" id="d-date">—</div></div>
    <div class="field-row"><div class="label">Time</div><div class="value" id="d-time">—</div></div>
    <div class="field-row"><div class="label">Doctor</div><div class="value" id="d-doctor">—</div></div>
    <div class="field-row"><div class="label">Room</div><div class="value" id="d-room">—</div></div>
    <div class="field-row"><div class="label">Type</div><div class="value" id="d-type">—</div></div>
    <div class="field-row"><div class="label">Status</div><div class="value" id="d-status">—</div></div>
    <div class="field-row" style="align-items:start;"><div class="label">Summary</div><div class="value"><textarea id="d-summary" class="note-input" placeholder="Note / summary…"></textarea></div></div>
    <div class="field-row" style="align-items:start;"><div class="label">Comment</div><div class="value"><textarea id="d-comment" class="comment-input" placeholder="Comment…"></textarea></div></div>
  </div>
  <div class="drawer-footer">
    <button class="btn-small" id="drawerEditBtn" style="margin-right:auto; display:none;">Edit Appointment…</button>
    <button class="btn-small" id="drawerCancelBtn" type="button">Cancel</button>
    <button class="btn-small primary" id="drawerSaveBtn" type="button">Save</button>
  </div>
</aside>

<script src="/medical_clinic/public/js/patient_details.js" defer></script>

</body>
</html>
