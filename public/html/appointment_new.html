<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>New Appointment — BrightCare</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/medical_clinic/public/css/appointments.css">
</head>
<body>
<div class="layout">
  <aside class="sidebar" role="navigation" aria-label="Main">
    <div class="brand"><div class="brand-logo">BC</div><div class="brand-name">BrightCare</div></div>
    <nav class="nav">
      <div class="nav-section">
        <div class="nav-title">Appointments</div>
                <a class="nav-link" href="./appointments_calendar.html">Calendar</a>
        <a class="nav-link" href="/medical_clinic/public/html/appointments.html">View</a>
        <a class="nav-link active" href="/medical_clinic/public/html/appointment_new.html">Add</a>
      </div>
      <div class="nav-section">
        <div class="nav-title">Patients</div>
        <a class="nav-link" href="/medical_clinic/public/html/patients.html">View</a>
        <a class="nav-link" href="/medical_clinic/public/html/patient_new.html">Add</a>
      </div>
      <div class="nav-section">
        <div class="nav-title">Doctors</div>
        <a class="nav-link" href="/medical_clinic/public/html/doctors.html">View</a>
        <a class="nav-link" href="/medical_clinic/public/html/doctor_new.html">Add</a>
      </div>
      <div class="nav-section">
        <div class="nav-title">Rooms</div>
        <a class="nav-link" href="/medical_clinic/public/html/rooms.html">View</a>
        <a class="nav-link" href="/medical_clinic/public/html/room_new.html">Add</a>
      </div>
    </nav>
    <div class="sidebar-footer">
      <button id="logoutBtn" class="logout-btn" type="button">Log out</button>
    </div>
  </aside>

  <main class="container">
    <header class="page-header">
      <h1>New Appointment</h1>
      <a class="link-new" href="/medical_clinic/public/html/appointments.html">← Back to Appointments</a>
    </header>

    <section class="card">
      <form id="newForm" class="form-grid">
        <div class="grid">
          <label> Patient
            <input id="patientSearch" type="text" placeholder="Search patients…"/>
            <select id="newPatient"></select>
          </label>
          <label> Doctor
            <input id="doctorSearch" type="text" placeholder="Search doctors…"/>
            <select id="newDoctor"></select>
          </label>
          <label> Room
            <select id="newRoom"></select>
          </label>
        </div>

        <div class="grid">
          <label> Date
            <input id="newDate" type="date" required/>
          </label>
          <label> From
            <input id="newFrom" type="time" required/>
          </label>
          <label> To
            <input id="newTo" type="time" required/>
          </label>
        </div>

        <div class="grid">
          <label> Type
            <select id="newType">
              <option value="Consultation">Consultation</option>
              <option value="Follow-up">Follow-up</option>
              <option value="Procedure">Procedure</option>
            </select>
          </label>
          <label class="full"> Summary
            <input id="newSummary" type="text" placeholder="Summary"/>
          </label>
          <label class="full"> Comments
            <textarea id="newComment" rows="3" placeholder="Notes…"></textarea>
          </label>
        </div>

        <div class="form-actions">
          <div id="newMsg" class="form-msg"></div>
          <button type="submit" class="btn-primary">Create</button>
        </div>
      </form>
    </section>
  </main>
</div>

<script>
  // Auth gate + logout
  (function(){
    const t = localStorage.getItem('token') || sessionStorage.getItem('token');
    if (!t) { location.href='../../login.html'; return; }
    document.getElementById('logoutBtn').addEventListener('click', ()=>{
      localStorage.removeItem('token'); sessionStorage.removeItem('token'); location.href='../../login.html';
    });
  })();
</script>
<script src="/medical_clinic/public/js/appointment_new.js" defer></script>
</body>
</html>
